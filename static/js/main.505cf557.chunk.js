(this.webpackJsonpintro=this.webpackJsonpintro||[]).push([[0],{18:function(t,e,c){},19:function(t,e,c){},23:function(t,e,c){"use strict";c.r(e);var n=c(0),s=c.n(n),r=c(11),o=c.n(r),a=(c(18),c(19),c(5)),i=c(2),j=c(3),u=c(9),l=c.n(u),b=c(12);function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=Object(n.useState)(null),s=Object(j.a)(c,2),r=s[0],o=s[1],a=Object(n.useState)(!1),i=Object(j.a)(a,2),u=i[0],d=i[1],h=Object(n.useState)(null),O=Object(j.a)(h,2),p=O[0],x=O[1];return Object(n.useEffect)((function(){(function(){var c=Object(b.a)(l.a.mark((function c(){var n,s;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return d(!0),c.prev=1,c.next=4,fetch(t,e);case 4:if((n=c.sent).ok){c.next=7;break}throw new Error(n.statusText);case 7:return c.next=9,n.json();case 9:s=c.sent,o(s),x(null),c.next=17;break;case 14:c.prev=14,c.t0=c.catch(1),x(c.t0);case 17:return c.prev=17,d(!1),c.finish(17);case 20:case"end":return c.stop()}}),c,null,[[1,14,17,20]])})));return function(){return c.apply(this,arguments)}})()()}),[t,e]),[r,u,p]}var h=c(13),O=c.n(h),p=c(1);var x=function(t){var e=t.post,c=Object(i.f)();return Object(p.jsx)("article",{className:"Post",onClick:function(){c("/posts/".concat(e.id))},children:Object(p.jsxs)("div",{className:"Post__content",children:[Object(p.jsxs)("header",{className:"Post__header",children:[Object(p.jsx)("div",{className:"Post-creator__img"}),Object(p.jsxs)("div",{className:"Post__about",children:[Object(p.jsx)("div",{className:"Post-creator__name",children:"\u0418\u043c\u044f \u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),Object(p.jsx)("span",{className:"Post__time",children:O()(e.created).fromNow()})]})]}),Object(p.jsx)("div",{className:"Post__text",children:Object(p.jsx)("p",{children:e.content})})]})})};var m=function(t){return t.data.map((function(t){return Object(p.jsx)(x,{post:t},t.id)}))};var f=function(){var t=d("".concat("https://ra-router-crud.herokuapp.com/","posts")),e=Object(j.a)(t,3),c=e[0],n=e[1],s=e[2];return Object(p.jsxs)("div",{className:"posts",children:[n&&Object(p.jsx)("div",{children:" \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430... "}),s&&Object(p.jsxs)("div",{children:[" ",s," "]}),c&&!n&&Object(p.jsx)("section",{className:"posts-wrapper",children:c.length<1?Object(p.jsx)("div",{children:"\u043d\u0435\u0442 \u043f\u043e\u0441\u0442\u043e\u0432"}):Object(p.jsx)(m,{data:c})})]})},v=c(6),N=c(10);var _=function(t){var e=t.onSubmit,c=t.onClose,s=Object(n.useState)({content:""}),r=Object(j.a)(s,2),o=r[0],a=r[1];return Object(p.jsx)("div",{className:"Form",children:Object(p.jsxs)("form",{children:[Object(p.jsx)("textarea",{className:"Form_content",name:"content",value:o.content,onChange:function(t){var e=t.target;a((function(t){return Object(N.a)(Object(N.a)({},t),{},Object(v.a)({},e.name,e.value))}))},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"}),Object(p.jsxs)("div",{className:"Form_control",children:[Object(p.jsx)("button",{className:"Form_submit",type:"button",onClick:function(){e(o.content)},children:"\u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"}),Object(p.jsx)("button",{className:"Form_close",type:"button",onClick:c,children:"\xd7"})]})]})})};var P=function(){var t=Object(i.f)(),e=function(){return t("/")};return Object(p.jsx)("div",{className:"NewPost",children:Object(p.jsx)(_,{onSubmit:function(t){""!==t?fetch("".concat("https://ra-router-crud.herokuapp.com/","posts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:0,content:t})}).then((function(){return e()})):e()},onClose:e})})};var k=function(){var t=Object(i.g)().id,e=Object(n.useState)(!1),c=Object(j.a)(e,2),s=c[0],r=c[1],o=d("".concat("https://ra-router-crud.herokuapp.com/","posts/")),a=Object(j.a)(o,3),u=a[0],l=a[1],b=a[2],h=function(){return u.find((function(e){return+e.id===+t}))},O=Object(i.f)(),m=function(){return O("/")};return Object(p.jsxs)("div",{className:"post",children:[l&&Object(p.jsx)("div",{children:" \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430... "}),b&&Object(p.jsxs)("div",{children:[" ",b," "]}),u&&!l&&Object(p.jsxs)("div",{className:"Post-wrapper",children:[Object(p.jsx)("button",{className:"Post_close",type:"button",onClick:m,children:"\u043d\u0430\u0437\u0430\u0434"}),Object(p.jsx)(x,{post:h()}),Object(p.jsxs)("div",{className:"Post_control",children:[Object(p.jsx)("button",{className:"Post_delete",type:"button",onClick:function(){fetch("".concat("https://ra-router-crud.herokuapp.com/","posts/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(){return m()}))},children:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(p.jsx)("button",{className:"Post_close",type:"button",onClick:function(){r(!s)},children:"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),s&&Object(p.jsx)("div",{className:"PostPage__edit",children:Object(p.jsx)(_,{post:h(),onSubmit:function(e){fetch("".concat("https://ra-router-crud.herokuapp.com/","posts/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:+t,content:e})}).then((function(){return m()}))},onClose:m})})]})]})]})};var g=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(a.a,{children:[Object(p.jsx)(a.b,{to:"/posts/new",children:Object(p.jsx)("div",{className:"link",children:Object(p.jsx)("p",{children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"})})}),Object(p.jsx)("div",{className:"page",children:Object(p.jsxs)(i.c,{children:[Object(p.jsx)(i.a,{path:"/",exact:!0,element:Object(p.jsx)(f,{})}),Object(p.jsx)(i.a,{path:"/posts/new",element:Object(p.jsx)(P,{})}),Object(p.jsx)(i.a,{path:"/posts/:id",element:Object(p.jsx)(k,{})})]})})]})})},C=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,24)).then((function(e){var c=e.getCLS,n=e.getFID,s=e.getFCP,r=e.getLCP,o=e.getTTFB;c(t),n(t),s(t),r(t),o(t)}))};o.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(g,{})}),document.getElementById("root")),C()}},[[23,1,2]]]);
//# sourceMappingURL=main.505cf557.chunk.js.map